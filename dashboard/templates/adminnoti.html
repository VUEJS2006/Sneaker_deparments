{% extends 'base.html' %}

{% block title %}Admin Notification{% endblock %}
{% load static %}

{% block content %}
{% include 'sider.html'%}


<div class="main-wrapper" style="margin-left: 300px;">

	<main class="main-content-wrapper">
		<div class="container">
			<!-- row -->
			<div class="row mb-8">
				<div class="col-md-12">
					<div class="d-flex flex-column flex-md-row justify-content-between align-items-md-center gap-4">
						<!-- pageheader -->
						<div>
							<h2>Notification Deparment</h2>
							<!-- breacrumb -->
						</div>
						<!-- button -->
						<div>
							<button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#addModal">Add New
								Noti</button>
						</div>
					</div>
				</div>
			</div>
			<div class="row">
				<div class="col-xl-12 col-12 mb-5">
					<!-- card -->
					<div class="card h-100 card-lg">
						<div class="px-6 py-6">
							<div class="row justify-content-between">
								<div class="col-lg-4 col-md-6 col-12 mb-2 mb-md-0">
									<!-- form -->
									<form class="d-flex" role="search">
										<input class="form-control" type="search" placeholder="Search Noti"
											aria-label="Search" />
									</form>
								</div>
								<!-- select option -->

							</div>
						</div>
						<!-- card body -->
						<div class="card-body p-0">
							<!-- table -->
							<div class="table-responsive">
								<table
									class="table table-centered table-hover mb-0 text-nowrap table-borderless table-with-checkbox">
									<thead class="bg-light">
										<tr>
											<th>No</th>
											<th>Title</th>
											<th>Content</th>
                                            <th>User</th>
											<th scope="col">Action</th>
										</tr>
									</thead>
									<tbody>
										{% for noti in notis %}
										<tr>
											<td>{{forloop.counter}}</td>
											<td>{{noti.title}}</td>
											<td>{{noti.content}}</td>
                                            <td>{{noti.user}}</td>
											<td>
												<button class="btn btn-success" data-bs-toggle="modal"
													data-bs-target="#updateModal_{{noti.id}}"><i class="bi bi-arrow-clockwise"></i></button>
												<button class="btn btn-danger" data-bs-toggle="modal"
													data-bs-target="#deleteModal_{{noti.id}}"><i class="bi bi-trash3"></i></button>
											</td>
										</tr>
										{% endfor %}

							</div>
							</td>
							</tr>
							</tbody>
							</table>
						</div>
					</div>
					<div
						class="border-top d-flex justify-content-between align-items-md-center px-6 py-6 flex-md-row flex-column gap-4">
						<span>Showing 1 to 8 of 12 entries</span>
						<nav>
							<ul class="pagination mb-0">
								<li class="page-item disabled"><a class="page-link" href="#!">Previous</a></li>
								<li class="page-item"><a class="page-link active" href="#!">1</a></li>
								<li class="page-item"><a class="page-link" href="#!">2</a></li>
								<li class="page-item"><a class="page-link" href="#!">3</a></li>
								<li class="page-item"><a class="page-link" href="#!">Next</a></li>
							</ul>
						</nav>
					</div>
				</div>
			</div>
		</div>
</div>
<!-- crete -->

<div class="modal fade" id="addModal" tabindex="-1" aria-labelledby="addModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content border-0 shadow">

            <div class="modal-header bg-primary text-white">
                <h5 class="modal-title" id="addModalLabel">Add New Product</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>

            <div class="modal-body">
                <form method="POST" action="{% url 'noti_create'%}" enctype="multipart/form-data">
                    {% csrf_token %}
                    <div class="mb-3 text-start">
                        <label for="productName" class="form-label">Title</label>
                        <input type="text" class="form-control" name="title" id="productName"
                            placeholder="Enter Noti Title" required>
                    </div>
                    <div class="mb-3 text-start">
                        <label for="contet" class="col-form-label">Content</label>
                        <textarea style="resize: none;" class="form-control" name="content"
                            id="contet"></textarea>
                    </div>
                    <div class="mb-3 text-start">
                        <label for="user" class="col-form-label">User</label>
                        <select name="user" class="form-control" id="user">
                            {% for user in users %}
                            <option value="{{user.id}}">{{user.username}}</option>
                            {% endfor %}
                        </select>
                    </div>
                    <div class="text-end">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                        <button type="submit" class="btn btn-primary">Save</button>
                    </div>
                </form>
            </div>

        </div>
    </div>
</div>
<!-- Update -->
{% for noti in notis %}
<div class="modal fade" id="updateModal_{{noti.id}}" tabindex="-1" aria-labelledby="updateModalLabel"
	aria-hidden="true">
	<div class="modal-dialog">
		<div class="modal-content border-0 shadow">

			<div class="modal-header bg-primary text-white">
				<h5 class="modal-title" id="updateModalLabel">Update Noti</h5>
				<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
			</div>
			<div class="modal-body">
				<form method="POST" action="{% url 'noti_update' noti.id%}">
					{% csrf_token %}
					  <div class="mb-3 text-start">
                        <label for="productName" class="form-label">Title</label>
                        <input type="text" class="form-control" value="{{noti.title}}" name="title" id="productName"
                            placeholder="Enter Noti Title" required>
                    </div>
                    <div class="mb-3 text-start">
                        <label for="contet" class="col-form-label">Content</label>
                        <textarea style="resize: none;" class="form-control" name="content"
                            id="contet">{{noti.content}}</textarea>
                    </div>
                     <div class="mb-3 text-start">
                        <label for="user" class="col-form-label">User</label>
                        <select name="user" class="form-control" id="user">
                            {% for user in users %}
                            <option value="{{user.id}}">{{user.username}}</option>
                            {% endfor %}
                        </select>
                    </div>
					<div class="text-end">
						<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
						<button type="submit" class="btn btn-primary">Update</button>
					</div>
				</form>
			</div>

		</div>
	</div>
</div>
{% endfor %}
<!-- Delete -->
{% for noti in notis %}
<div class="modal fade" id="deleteModal_{{ noti.id }}" tabindex="-1">
    <div class="modal-dialog">
        <div class="modal-content border-0 shadow">
            <div class="modal-header bg-danger text-white">
                <h5 class="modal-title">Delete Noti</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>
            <form method="POST" action="{% url 'noti_delete' noti.id %}">
                {% csrf_token %}
                <div class="modal-body">
                    Are you sure you want to delete <strong>{{ noti.title }}</strong>?
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="submit" class="btn btn-danger">Delete</button>
                </div>
            </form>
        </div>
    </div>
</div>
{% endfor %}
<script src="{% static 'js/bootstrap.bundle.min.js'%}"></script>
<script src="{% static 'js/bootstrap.bundle.min.js'%}"></script>

<script src="{% static 'js/theme.min.js'%}"></script>

{% endblock %}